E:\JAVA\JAVA22\bin\java.exe -XX:TieredStopAtLevel=1 -Dspring.output.ansi.enabled=always -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true "-Dmanagement.endpoints.jmx.exposure.include=*" "-javaagent:D:\JetBrains\IntelliJ IDEA 2024.2.1\lib\idea_rt.jar=3842:D:\JetBrains\IntelliJ IDEA 2024.2.1\bin" -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath E:\IdeaProjects\cfdownloadexample\target\classes;D:\Maven\repository\org\springframework\boot\spring-boot-starter-web\3.2.5\spring-boot-starter-web-3.2.5.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter\3.2.5\spring-boot-starter-3.2.5.jar;D:\Maven\repository\org\springframework\boot\spring-boot\3.2.5\spring-boot-3.2.5.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-logging\3.2.5\spring-boot-starter-logging-3.2.5.jar;D:\Maven\repository\ch\qos\logback\logback-classic\1.4.14\logback-classic-1.4.14.jar;D:\Maven\repository\ch\qos\logback\logback-core\1.4.14\logback-core-1.4.14.jar;D:\Maven\repository\org\apache\logging\log4j\log4j-to-slf4j\2.21.1\log4j-to-slf4j-2.21.1.jar;D:\Maven\repository\org\apache\logging\log4j\log4j-api\2.21.1\log4j-api-2.21.1.jar;D:\Maven\repository\org\slf4j\jul-to-slf4j\2.0.13\jul-to-slf4j-2.0.13.jar;D:\Maven\repository\org\yaml\snakeyaml\2.2\snakeyaml-2.2.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-json\3.2.5\spring-boot-starter-json-3.2.5.jar;D:\Maven\repository\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.15.4\jackson-datatype-jdk8-2.15.4.jar;D:\Maven\repository\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.15.4\jackson-datatype-jsr310-2.15.4.jar;D:\Maven\repository\com\fasterxml\jackson\module\jackson-module-parameter-names\2.15.4\jackson-module-parameter-names-2.15.4.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-tomcat\3.2.5\spring-boot-starter-tomcat-3.2.5.jar;D:\Maven\repository\org\apache\tomcat\embed\tomcat-embed-core\10.1.20\tomcat-embed-core-10.1.20.jar;D:\Maven\repository\org\apache\tomcat\embed\tomcat-embed-websocket\10.1.20\tomcat-embed-websocket-10.1.20.jar;D:\Maven\repository\org\springframework\spring-web\6.1.6\spring-web-6.1.6.jar;D:\Maven\repository\org\springframework\spring-beans\6.1.6\spring-beans-6.1.6.jar;D:\Maven\repository\io\micrometer\micrometer-observation\1.12.5\micrometer-observation-1.12.5.jar;D:\Maven\repository\io\micrometer\micrometer-commons\1.12.5\micrometer-commons-1.12.5.jar;D:\Maven\repository\org\springframework\spring-webmvc\6.1.6\spring-webmvc-6.1.6.jar;D:\Maven\repository\org\springframework\spring-context\6.1.6\spring-context-6.1.6.jar;D:\Maven\repository\org\springframework\spring-expression\6.1.6\spring-expression-6.1.6.jar;D:\Maven\repository\jakarta\xml\bind\jakarta.xml.bind-api\4.0.2\jakarta.xml.bind-api-4.0.2.jar;D:\Maven\repository\jakarta\activation\jakarta.activation-api\2.1.3\jakarta.activation-api-2.1.3.jar;D:\Maven\repository\org\springframework\spring-core\6.1.6\spring-core-6.1.6.jar;D:\Maven\repository\org\springframework\spring-jcl\6.1.6\spring-jcl-6.1.6.jar;D:\Maven\repository\cn\hutool\hutool-all\5.8.24\hutool-all-5.8.24.jar;D:\Maven\repository\org\projectlombok\lombok\1.18.38\lombok-1.18.38.jar;D:\Maven\repository\org\mybatis\generator\mybatis-generator-core\1.4.1\mybatis-generator-core-1.4.1.jar;D:\Maven\repository\jakarta\annotation\jakarta.annotation-api\2.1.1\jakarta.annotation-api-2.1.1.jar;D:\Maven\repository\org\mybatis\spring\boot\mybatis-spring-boot-starter\3.0.3\mybatis-spring-boot-starter-3.0.3.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-jdbc\3.2.5\spring-boot-starter-jdbc-3.2.5.jar;D:\Maven\repository\com\zaxxer\HikariCP\5.0.1\HikariCP-5.0.1.jar;D:\Maven\repository\org\springframework\spring-jdbc\6.1.6\spring-jdbc-6.1.6.jar;D:\Maven\repository\org\mybatis\spring\boot\mybatis-spring-boot-autoconfigure\3.0.3\mybatis-spring-boot-autoconfigure-3.0.3.jar;D:\Maven\repository\org\mybatis\mybatis\3.5.14\mybatis-3.5.14.jar;D:\Maven\repository\org\mybatis\mybatis-spring\3.0.3\mybatis-spring-3.0.3.jar;D:\Maven\repository\com\mysql\mysql-connector-j\8.0.33\mysql-connector-j-8.0.33.jar;D:\Maven\repository\com\alibaba\druid-spring-boot-starter\1.2.16\druid-spring-boot-starter-1.2.16.jar;D:\Maven\repository\com\alibaba\druid\1.2.16\druid-1.2.16.jar;D:\Maven\repository\org\slf4j\slf4j-api\2.0.13\slf4j-api-2.0.13.jar;D:\Maven\repository\org\springframework\boot\spring-boot-autoconfigure\3.2.5\spring-boot-autoconfigure-3.2.5.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-amqp\3.2.5\spring-boot-starter-amqp-3.2.5.jar;D:\Maven\repository\org\springframework\spring-messaging\6.1.6\spring-messaging-6.1.6.jar;D:\Maven\repository\org\springframework\amqp\spring-rabbit\3.1.4\spring-rabbit-3.1.4.jar;D:\Maven\repository\org\springframework\amqp\spring-amqp\3.1.4\spring-amqp-3.1.4.jar;D:\Maven\repository\com\rabbitmq\amqp-client\5.19.0\amqp-client-5.19.0.jar;D:\Maven\repository\org\springframework\spring-tx\6.1.6\spring-tx-6.1.6.jar;D:\Maven\repository\org\springframework\integration\spring-integration-mqtt\6.2.4\spring-integration-mqtt-6.2.4.jar;D:\Maven\repository\org\springframework\integration\spring-integration-core\6.2.4\spring-integration-core-6.2.4.jar;D:\Maven\repository\org\springframework\retry\spring-retry\2.0.5\spring-retry-2.0.5.jar;D:\Maven\repository\io\projectreactor\reactor-core\3.6.5\reactor-core-3.6.5.jar;D:\Maven\repository\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\Maven\repository\org\eclipse\paho\org.eclipse.paho.client.mqttv3\1.2.5\org.eclipse.paho.client.mqttv3-1.2.5.jar;D:\Maven\repository\org\springdoc\springdoc-openapi-starter-webmvc-ui\2.1.0\springdoc-openapi-starter-webmvc-ui-2.1.0.jar;D:\Maven\repository\org\springdoc\springdoc-openapi-starter-webmvc-api\2.1.0\springdoc-openapi-starter-webmvc-api-2.1.0.jar;D:\Maven\repository\org\springdoc\springdoc-openapi-starter-common\2.1.0\springdoc-openapi-starter-common-2.1.0.jar;D:\Maven\repository\io\swagger\core\v3\swagger-core-jakarta\2.2.9\swagger-core-jakarta-2.2.9.jar;D:\Maven\repository\org\apache\commons\commons-lang3\3.13.0\commons-lang3-3.13.0.jar;D:\Maven\repository\io\swagger\core\v3\swagger-annotations-jakarta\2.2.9\swagger-annotations-jakarta-2.2.9.jar;D:\Maven\repository\io\swagger\core\v3\swagger-models-jakarta\2.2.9\swagger-models-jakarta-2.2.9.jar;D:\Maven\repository\com\fasterxml\jackson\dataformat\jackson-dataformat-yaml\2.15.4\jackson-dataformat-yaml-2.15.4.jar;D:\Maven\repository\org\webjars\swagger-ui\4.18.2\swagger-ui-4.18.2.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-data-redis\3.2.5\spring-boot-starter-data-redis-3.2.5.jar;D:\Maven\repository\io\lettuce\lettuce-core\6.3.2.RELEASE\lettuce-core-6.3.2.RELEASE.jar;D:\Maven\repository\io\netty\netty-common\4.1.109.Final\netty-common-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-handler\4.1.109.Final\netty-handler-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-resolver\4.1.109.Final\netty-resolver-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-buffer\4.1.109.Final\netty-buffer-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-transport-native-unix-common\4.1.109.Final\netty-transport-native-unix-common-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-codec\4.1.109.Final\netty-codec-4.1.109.Final.jar;D:\Maven\repository\io\netty\netty-transport\4.1.109.Final\netty-transport-4.1.109.Final.jar;D:\Maven\repository\org\springframework\data\spring-data-redis\3.2.5\spring-data-redis-3.2.5.jar;D:\Maven\repository\org\springframework\data\spring-data-keyvalue\3.2.5\spring-data-keyvalue-3.2.5.jar;D:\Maven\repository\org\springframework\data\spring-data-commons\3.2.5\spring-data-commons-3.2.5.jar;D:\Maven\repository\org\springframework\spring-oxm\6.1.6\spring-oxm-6.1.6.jar;D:\Maven\repository\com\fasterxml\jackson\core\jackson-databind\2.15.4\jackson-databind-2.15.4.jar;D:\Maven\repository\com\fasterxml\jackson\core\jackson-annotations\2.15.4\jackson-annotations-2.15.4.jar;D:\Maven\repository\com\fasterxml\jackson\core\jackson-core\2.15.4\jackson-core-2.15.4.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-cache\3.2.5\spring-boot-starter-cache-3.2.5.jar;D:\Maven\repository\org\springframework\spring-context-support\6.1.6\spring-context-support-6.1.6.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-validation\3.2.5\spring-boot-starter-validation-3.2.5.jar;D:\Maven\repository\org\apache\tomcat\embed\tomcat-embed-el\10.1.20\tomcat-embed-el-10.1.20.jar;D:\Maven\repository\org\hibernate\validator\hibernate-validator\8.0.1.Final\hibernate-validator-8.0.1.Final.jar;D:\Maven\repository\jakarta\validation\jakarta.validation-api\3.0.2\jakarta.validation-api-3.0.2.jar;D:\Maven\repository\org\jboss\logging\jboss-logging\3.5.3.Final\jboss-logging-3.5.3.Final.jar;D:\Maven\repository\com\fasterxml\classmate\1.6.0\classmate-1.6.0.jar;D:\Maven\repository\org\springframework\boot\spring-boot-starter-aop\3.2.5\spring-boot-starter-aop-3.2.5.jar;D:\Maven\repository\org\springframework\spring-aop\6.1.6\spring-aop-6.1.6.jar;D:\Maven\repository\org\aspectj\aspectjweaver\1.9.22\aspectjweaver-1.9.22.jar com.pandatech.downloadcf.DownloadcfApplication

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.5)

2025-07-24T11:21:26.683+08:00  INFO 34968 --- [           main] c.p.downloadcf.DownloadcfApplication     : Starting DownloadcfApplication using Java 22.0.2 with PID 34968 (E:\IdeaProjects\cfdownloadexample\target\classes started by Ming in E:\IdeaProjects\cfdownloadexample)
2025-07-24T11:21:26.685+08:00  INFO 34968 --- [           main] c.p.downloadcf.DownloadcfApplication     : No active profile set, falling back to 1 default profile: "default"
2025-07-24T11:21:27.554+08:00  INFO 34968 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-24T11:21:27.556+08:00  INFO 34968 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-24T11:21:27.601+08:00  INFO 34968 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2025-07-24T11:21:27.691+08:00  INFO 34968 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-07-24T11:21:27.697+08:00  INFO 34968 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-07-24T11:21:28.342+08:00  INFO 34968 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8999 (http)
2025-07-24T11:21:28.355+08:00  INFO 34968 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-07-24T11:21:28.355+08:00  INFO 34968 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2025-07-24T11:21:28.414+08:00  INFO 34968 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-07-24T11:21:28.414+08:00  INFO 34968 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1680 ms
Logging initialized using 'class org.apache.ibatis.logging.stdout.StdOutImpl' adapter.
2025-07-24T11:21:29.524+08:00  INFO 34968 --- [           main] c.pandatech.downloadcf.config.EslConfig  : 初始化品牌适配器列表
2025-07-24T11:21:29.525+08:00  INFO 34968 --- [           main] c.pandatech.downloadcf.config.EslConfig  : 初始化消息执行器列表
2025-07-24T11:21:30.405+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-07-24T11:21:30.405+08:00  INFO 34968 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'application.errorChannel' has 1 subscriber(s).
2025-07-24T11:21:30.406+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
2025-07-24T11:21:30.406+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {message-handler:mqttOutbound.serviceActivator} as a subscriber to the 'mqttOutboundChannel' channel
2025-07-24T11:21:30.407+08:00  INFO 34968 --- [           main] o.s.integration.channel.DirectChannel    : Channel 'application.mqttOutboundChannel' has 1 subscriber(s).
2025-07-24T11:21:30.407+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttOutbound.serviceActivator'
2025-07-24T11:21:30.407+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {service-activator:mqttService.handleMessage.serviceActivator} as a subscriber to the 'mqttInputChannel' channel
2025-07-24T11:21:30.407+08:00  INFO 34968 --- [           main] o.s.integration.channel.DirectChannel    : Channel 'application.mqttInputChannel' has 1 subscriber(s).
2025-07-24T11:21:30.407+08:00  INFO 34968 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttService.handleMessage.serviceActivator'
2025-07-24T11:21:30.762+08:00  INFO 34968 --- [           main] .m.i.MqttPahoMessageDrivenChannelAdapter : started bean 'inbound'; defined in: 'class path resource [com/pandatech/downloadcf/config/MqttConfig.class]'; from source: 'com.pandatech.downloadcf.config.MqttConfig.inbound()'
2025-07-24T11:21:30.778+08:00  INFO 34968 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8999 (http) with context path ''
2025-07-24T11:21:30.780+08:00  INFO 34968 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.3.36.15:5672]
2025-07-24T11:21:30.819+08:00  INFO 34968 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#4404a6b:0/SimpleConnection@7e28f150 [delegate=amqp://panda@10.3.36.15:5672/, localPort=3862]
2025-07-24T11:21:30.884+08:00  INFO 34968 --- [           main] c.p.downloadcf.DownloadcfApplication     : Started DownloadcfApplication in 4.575 seconds (process running for 5.144)
2025-07-24T11:21:34.793+08:00  INFO 34968 --- [nio-8999-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-24T11:21:34.793+08:00  INFO 34968 --- [nio-8999-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-07-24T11:21:34.795+08:00  INFO 34968 --- [nio-8999-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-07-24T11:21:34.949+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.d.service.TemplateServiceImpl        : 开始下发模板，模板ID: 1946122678071738370, 门店编码: 0002, 品牌编码: PANDA
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba69df9] was not registered for synchronization because synchronization is not active
2025-07-24T11:21:35.008+08:00  INFO 34968 --- [nio-8999-exec-1] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba69df9]
2025-07-24T11:21:35.216+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:21:35.216+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 4572
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"pape
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : CONTENT长度: 338
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"2","paperType":"CUSTOM","width":250,"height":122,"paperHeader":0,"pape
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 4572
2025-07-24T11:21:35.217+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"paperHeader":0,"paperFooter":345.82677165354335,"printElements":[{"options":{"left":27,"top":0,"height":...
2025-07-24T11:21:35.225+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@b7c7868
2025-07-24T11:21:35.226+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:21:35.245+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:21:35.245+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:21:35.245+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 2, 类型: String
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 2
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 2.13T
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 2, 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.246+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:21:35.247+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 250x122
2025-07-24T11:21:35.263+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成18个Items，最终TagType: 06
2025-07-24T11:21:35.299+08:00  INFO 34968 --- [nio-8999-exec-1] c.p.d.service.TemplateServiceImpl        : 模板下发消息已发送到队列，模板ID: 1946122678071738370, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:21:35.307+08:00  INFO 34968 --- [ntContainer#0-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到模板消息: {"mqttPayload":{"shop":"0002","data":{"tmpls":[{"name":"2_06.json","id":"1946122678071738370","md5":"4d37b133fc8626f9da4f0d30ef2dd938"}],"url":"http://10.3.36.36:8999/api/res/templ/loadtemple","tid":"c409bd2e-a182-4f99-8394-22071a66d3c6"},"id":"1946122678071738370","command":"tmpllist","timestamp":1753327295},"messageType":"template","mqttTopic":"esl/server/data/0002","templateId":"1946122678071738370","priority":2,"storeCode":"0002","brandCode":"PANDA","timestamp":1753327295216}
2025-07-24T11:21:35.308+08:00  INFO 34968 --- [ntContainer#0-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式模板消息: storeCode=0002, topic=esl/server/data/0002, priority=2
2025-07-24T11:21:35.647+08:00  INFO 34968 --- [ntContainer#0-2] c.p.downloadcf.service.RabbitMQListener  : 新格式模板消息MQTT发送成功: topic=esl/server/data/0002
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce77e22] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce77e22]
2025-07-24T11:21:35.713+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 4572
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"pape
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT长度: 338
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"2","paperType":"CUSTOM","width":250,"height":122,"paperHeader":0,"pape
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 4572
2025-07-24T11:21:35.714+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"paperHeader":0,"paperFooter":345.82677165354335,"printElements":[{"options":{"left":27,"top":0,"height":...
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@d1142ad
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 2, 类型: String
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 2
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 2.13T
2025-07-24T11:21:35.715+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 2, 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.716+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.716+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:21:35.716+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 250x122
2025-07-24T11:21:35.719+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成18个Items，最终TagType: 06
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b59e24a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b59e24a]
2025-07-24T11:21:35.725+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:21:35.725+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:21:35.725+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 4572
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"pape
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT长度: 338
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"2","paperType":"CUSTOM","width":250,"height":122,"paperHeader":0,"pape
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 4572
2025-07-24T11:21:35.726+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"2","paperType":"CUSTOM","height":122,"width":250,"paperHeader":0,"paperFooter":345.82677165354335,"printElements":[{"options":{"left":27,"top":0,"height":...
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@53814c14
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 2, 类型: String
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 2
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 2.13T
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 2, 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 2.13T, TagType: 06
2025-07-24T11:21:35.727+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:21:35.728+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 250x122
2025-07-24T11:21:35.730+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成18个Items，最终TagType: 06
2025-07-24T11:21:52.229+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:21:52.229+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:21:52.230+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:21:52.230+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c9a1e7] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c9a1e7]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a281370] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a281370]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d4d218] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d4d218]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5674ef79] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5674ef79]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@619dd6d6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@619dd6d6]
2025-07-24T11:21:52.262+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20014102] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20014102]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7525a630] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7525a630]
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:21:52.320+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:21:52.321+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:21:52.321+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:21:52.321+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:21:52.321+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:21:52.321+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:21:52.322+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:21:52.323+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:21:52.323+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:21:52.323+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:21:52.323+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:21:52.323+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:21:52.324+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:21:52.325+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f37f] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f37f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de9cab0] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de9cab0]
2025-07-24T11:21:52.336+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22466a99] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22466a99]
2025-07-24T11:21:52.341+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:21:52.341+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:21:52.341+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:21:52.342+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:21:52.343+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:21:52.343+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b58e719] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b58e719]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d02f1] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d02f1]
2025-07-24T11:21:52.352+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5521d31a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5521d31a]
2025-07-24T11:21:52.357+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:21:52.358+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:21:52.358+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:21:52.358+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:21:52.358+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:21:52.358+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:21:52.360+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 12358, token: 741273
2025-07-24T11:21:52.360+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:21:52.367+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:21:52.367+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:21:52.367+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:21:52.370+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":12358,"token":741273}],"id":"1947313501023105026","timestamp":1.75332731236E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327312361}
2025-07-24T11:21:52.371+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:21:52.372+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
2025-07-24T11:22:24.404+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.TemplateServiceImpl        : 开始下发模板，模板ID: 1947312285182455810, 门店编码: 0002, 品牌编码: PANDA
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28155efa] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28155efa]
2025-07-24T11:22:24.409+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 3326
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"pape
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : CONTENT长度: 337
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"3","paperType":"CUSTOM","width":400,"height":300,"paperHeader":0,"pape
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 3326
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"paperHeader":0,"paperFooter":850.3937007874016,"printElements":[{"options":{"left":156,"top":265.5,"heig...
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@22ed358a
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 3, 类型: String
2025-07-24T11:22:24.410+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 3
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 4.20T
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 3, 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 400x300
2025-07-24T11:22:24.411+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成10个Items，最终TagType: 1C
2025-07-24T11:22:24.413+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.TemplateServiceImpl        : 模板下发消息已发送到队列，模板ID: 1947312285182455810, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:22:24.419+08:00  INFO 34968 --- [ntContainer#0-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到模板消息: {"mqttPayload":{"shop":"0002","data":{"tmpls":[{"name":"3_1C.json","id":"1947312285182455810","md5":"5469ef3daa59627dffbad3666f736669"}],"url":"http://10.3.36.36:8999/api/res/templ/loadtemple","tid":"fbda15ef-23d4-475b-8f5e-22e5a76e6a99"},"id":"1947312285182455810","command":"tmpllist","timestamp":1753327344},"messageType":"template","mqttTopic":"esl/server/data/0002","templateId":"1947312285182455810","priority":2,"storeCode":"0002","brandCode":"PANDA","timestamp":1753327344409}
2025-07-24T11:22:24.420+08:00  INFO 34968 --- [ntContainer#0-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式模板消息: storeCode=0002, topic=esl/server/data/0002, priority=2
2025-07-24T11:22:24.420+08:00  INFO 34968 --- [ntContainer#0-1] c.p.downloadcf.service.RabbitMQListener  : 新格式模板消息MQTT发送成功: topic=esl/server/data/0002
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfd7e94] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfd7e94]
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 3326
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"pape
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT长度: 337
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"3","paperType":"CUSTOM","width":400,"height":300,"paperHeader":0,"pape
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 3326
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"paperHeader":0,"paperFooter":850.3937007874016,"printElements":[{"options":{"left":156,"top":265.5,"heig...
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@760515e4
2025-07-24T11:22:24.493+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 3, 类型: String
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 3
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 4.20T
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 3, 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 400x300
2025-07-24T11:22:24.494+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成10个Items，最终TagType: 1C
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33078540] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33078540]
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON是否为null: false
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON长度: 3326
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : EXT_JSON前100个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"pape
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT是否为null: false
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT长度: 337
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : CONTENT前100个字符: {"panels":[{"index":0,"name":"3","paperType":"CUSTOM","width":400,"height":300,"paperHeader":0,"pape
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容长度: 3326
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 准备解析的JSON内容前200个字符: {"designConfig":{"panels":[{"index":0,"name":"3","paperType":"CUSTOM","height":300,"width":400,"paperHeader":0,"paperFooter":850.3937007874016,"printElements":[{"options":{"left":156,"top":265.5,"heig...
2025-07-24T11:22:24.499+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : JSON解析成功，根节点字段: java.util.LinkedHashMap$LinkedKeyIterator@2fe56d5
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 检测到designConfig格式模板，开始转换
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 解析CONTENT字段成功，根级字段: [panels]
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到panels字段，类型: ArrayList
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : panels数组长度: 1
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 第一个panel的字段: [index, name, paperType, width, height, paperHeader, paperFooter, printElements, paperNumberContinue, eslConfig]
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到panels[0].name字段，值: 3, 类型: String
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].name字段提取模板名称: 3
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 从CONTENT.panels[0].eslConfig.screenType字段提取屏幕类型: 4.20T
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换开始 - 模板名称: 3, 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换 - 屏幕类型: 4.20T, TagType: 1C
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 找到designConfig.panels字段
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 设置画布尺寸: 400x300
2025-07-24T11:22:24.500+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.MqttService       : 模板转换完成，共生成10个Items，最终TagType: 1C
2025-07-24T11:22:36.649+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947223724923940865, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:22:36.650+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947223724923940865, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:22:36.650+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:22:36.651+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70335244] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70335244]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acb3934] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acb3934]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55026cc6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55026cc6]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9dab0c] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9dab0c]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c46420] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c46420]
2025-07-24T11:22:36.676+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369941fb] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369941fb]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f77628] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f77628]
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947223724923940865, productId=1947222838805917697, templateId=1946122678071738370
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947223724923940865
2025-07-24T11:22:36.689+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 001, 商品名称: 测试商品
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:22:36.690+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=001, GOODS_NAME=测试商品, F_1=99.99, F_2=测试分类, F_3=9.99, F_4=PRODUCT_FRUIT, F_5=99.9, F_6=99.0, F_7=0.09, F_8=99.0, F_9=测试材质, F_10=http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, F_11=测试产地, F_20=<p>测试描述</p>, F_12=ge, F_13=9.0, F_14=测试状态, F_32=99, QRCODE=www.baidu.com}
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947223724923940865, actualEslId=06000000195A, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947223724923940865, 门店代码: 0002
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947223724923940865
2025-07-24T11:22:36.691+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ce2c92] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ce2c92]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3857f5df] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3857f5df]
2025-07-24T11:22:36.699+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d45f25] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d45f25]
2025-07-24T11:22:36.704+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:22:36.704+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:22:36.704+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 338 字符
2025-07-24T11:22:36.704+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 2
2025-07-24T11:22:36.705+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 2
2025-07-24T11:22:36.705+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd4e59b] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd4e59b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495c1d04] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495c1d04]
2025-07-24T11:22:36.712+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ae598a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ae598a]
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, CATEGORY: 2.13T
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 2.13T
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 2.13t
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 2.13t
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 2.13t -> 06
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 屏幕类型 2.13T 转换为model: 06
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 6597069773146, tmpl: 2, model: 06, taskid: 56717, token: 774365
2025-07-24T11:22:36.717+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:22:36.718+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947223724923940865, storeCode=0002
2025-07-24T11:22:36.718+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947223724923940865, brandCode=攀攀
2025-07-24T11:22:36.718+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947223724923940865
2025-07-24T11:22:36.722+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":6597069773146,"tmpl":"2","model":"06","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"001","GOODS_NAME":"测试商品","F_1":99.99,"F_2":"测试分类","F_3":9.99,"F_4":"PRODUCT_FRUIT","F_5":99.9,"F_6":99.0,"F_7":0.09,"F_8":99.0,"F_9":"测试材质","F_10":"http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81","F_11":"测试产地","F_20":"<p>测试描述</p>","F_12":"ge","F_13":9.0,"F_14":"测试状态","F_32":99,"QRCODE":"www.baidu.com"},"taskid":56717,"token":774365}],"id":"1947223724923940865","timestamp":1.753327356717E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947223724923940865","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327356717}
2025-07-24T11:22:36.722+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947223724923940865, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:22:36.723+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947223724923940865, topic=esl/server/data/0002
2025-07-24T11:22:41.066+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:22:41.067+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:22:41.067+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:22:41.067+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a8cf34d] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a8cf34d]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1074983d] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1074983d]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d932f] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d932f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506819fe] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506819fe]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71999277] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71999277]
2025-07-24T11:22:41.087+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6c11a6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6c11a6]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca09497] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca09497]
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:22:41.100+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:22:41.101+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa80906] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa80906]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36229804] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36229804]
2025-07-24T11:22:41.110+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538772a6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538772a6]
2025-07-24T11:22:41.112+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:22:41.112+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:22:41.112+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:22:41.113+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:22:41.113+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:22:41.113+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5b30fa] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5b30fa]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc00ba6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc00ba6]
2025-07-24T11:22:41.119+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3be9d0] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3be9d0]
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 61123, token: 977096
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:22:41.123+08:00  INFO 34968 --- [nio-8999-exec-9] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:22:41.127+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":61123,"token":977096}],"id":"1947313501023105026","timestamp":1.753327361123E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327361123}
2025-07-24T11:22:41.127+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:22:41.128+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
2025-07-24T11:23:57.154+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:23:57.154+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:23:57.154+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:23:57.154+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e08790] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e08790]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c5bd7e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c5bd7e]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d447b5] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d447b5]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f031d0d] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f031d0d]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8f7cb9] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8f7cb9]
2025-07-24T11:23:57.186+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dccae0] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dccae0]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db10f47] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db10f47]
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:23:57.197+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:23:57.198+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3c9f8b] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3c9f8b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3efbdbd3] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3efbdbd3]
2025-07-24T11:23:57.205+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749dc116] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749dc116]
2025-07-24T11:23:57.208+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:23:57.209+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:23:57.209+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:23:57.209+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:23:57.209+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:23:57.209+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b9ced7] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b9ced7]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cada02a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cada02a]
2025-07-24T11:23:57.215+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b1f514] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b1f514]
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 37217, token: 986511
2025-07-24T11:23:57.217+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:23:57.218+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:23:57.218+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:23:57.218+08:00  INFO 34968 --- [nio-8999-exec-2] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:23:57.221+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":37217,"token":986511}],"id":"1947313501023105026","timestamp":1.753327437217E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327437217}
2025-07-24T11:23:57.221+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:23:57.222+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
2025-07-24T11:24:41.146+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:24:41.146+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:24:41.146+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:24:41.146+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8957f8] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8957f8]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640acc3a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640acc3a]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9fcb59] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9fcb59]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbb2bb] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbb2bb]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d18d6a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d18d6a]
2025-07-24T11:24:41.169+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b646439] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b646439]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a2b619] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a2b619]
2025-07-24T11:24:41.180+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:24:41.180+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:24:41.181+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:24:41.182+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61689830] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61689830]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9a8e05] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9a8e05]
2025-07-24T11:24:41.191+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@553ca8c0] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@553ca8c0]
2025-07-24T11:24:41.195+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:24:41.195+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:24:41.195+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:24:41.196+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:24:41.196+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:24:41.196+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d7093c] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d7093c]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0fd464] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0fd464]
2025-07-24T11:24:41.204+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e3c0eb] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e3c0eb]
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 81207, token: 20572
2025-07-24T11:24:41.207+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:24:41.208+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:24:41.208+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:24:41.208+08:00  INFO 34968 --- [nio-8999-exec-3] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:24:41.211+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":81207,"token":20572}],"id":"1947313501023105026","timestamp":1.753327481207E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327481207}
2025-07-24T11:24:41.212+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:24:41.212+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
2025-07-24T11:25:21.078+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:25:21.079+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:25:21.081+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:25:21.081+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64607825] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64607825]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6828a19b] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6828a19b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd0192e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd0192e]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b32b82] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b32b82]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f2654b] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f2654b]
2025-07-24T11:25:21.106+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771e01bd] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771e01bd]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbd02e2] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbd02e2]
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:25:21.118+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:25:21.119+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306f8337] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306f8337]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9f9c8e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9f9c8e]
2025-07-24T11:25:21.127+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4ed40c] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4ed40c]
2025-07-24T11:25:21.131+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:25:21.131+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:25:21.131+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:25:21.132+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:25:21.132+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:25:21.132+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16156ff9] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16156ff9]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@859f435] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@859f435]
2025-07-24T11:25:21.140+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c3c34e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c3c34e]
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 21143, token: 26956
2025-07-24T11:25:21.143+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:25:21.145+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:25:21.145+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:25:21.145+08:00  INFO 34968 --- [nio-8999-exec-4] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:25:21.148+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":21143,"token":26956}],"id":"1947313501023105026","timestamp":1.753327521143E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327521143}
2025-07-24T11:25:21.148+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:25:21.149+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
2025-07-24T11:25:54.648+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947223724923940865, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:25:54.648+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947223724923940865, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:25:54.648+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:25:54.648+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67efbfb3] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67efbfb3]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c258e6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c258e6]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c040fc] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c040fc]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ecd73a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ecd73a]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ebb9d] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ebb9d]
2025-07-24T11:25:54.667+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c70b282] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c70b282]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a180f51] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a180f51]
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947223724923940865, productId=1947222838805917697, templateId=1946122678071738370
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947223724923940865
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 001, 商品名称: 测试商品
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:25:54.679+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=001, GOODS_NAME=测试商品, F_1=99.99, F_2=测试分类, F_3=9.99, F_4=PRODUCT_FRUIT, F_5=99.9, F_6=99.0, F_7=0.09, F_8=99.0, F_9=测试材质, F_10=http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, F_11=测试产地, F_20=<p>测试描述</p>, F_12=ge, F_13=9.0, F_14=测试状态, F_32=99, QRCODE=www.baidu.com}
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947223724923940865, actualEslId=06000000195A, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:25:54.680+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947223724923940865, 门店代码: 0002
2025-07-24T11:25:54.681+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947223724923940865
2025-07-24T11:25:54.681+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea3925] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea3925]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca83e20] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca83e20]
2025-07-24T11:25:54.688+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db9ef84] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db9ef84]
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 338 字符
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 2
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 2
2025-07-24T11:25:54.691+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bc7c93] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18bc7c93]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a511032] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a511032]
2025-07-24T11:25:54.697+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64861e42] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64861e42]
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, CATEGORY: 2.13T
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 2.13T
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 2.13t
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 2.13t
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 2.13t -> 06
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : 屏幕类型 2.13T 转换为model: 06
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 6597069773146, tmpl: 2, model: 06, taskid: 54700, token: 655203
2025-07-24T11:25:54.700+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:25:54.701+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947223724923940865, storeCode=0002
2025-07-24T11:25:54.701+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947223724923940865, brandCode=攀攀
2025-07-24T11:25:54.701+08:00  INFO 34968 --- [nio-8999-exec-5] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947223724923940865
2025-07-24T11:25:54.704+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":6597069773146,"tmpl":"2","model":"06","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"001","GOODS_NAME":"测试商品","F_1":99.99,"F_2":"测试分类","F_3":9.99,"F_4":"PRODUCT_FRUIT","F_5":99.9,"F_6":99.0,"F_7":0.09,"F_8":99.0,"F_9":"测试材质","F_10":"http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81","F_11":"测试产地","F_20":"<p>测试描述</p>","F_12":"ge","F_13":9.0,"F_14":"测试状态","F_32":99,"QRCODE":"www.baidu.com"},"taskid":54700,"token":655203}],"id":"1947223724923940865","timestamp":1.7533275547E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947223724923940865","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327554700}
2025-07-24T11:25:54.704+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947223724923940865, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:25:54.705+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947223724923940865, topic=esl/server/data/0002
2025-07-24T11:27:28.681+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947223724923940865, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:27:28.682+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947223724923940865, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:27:28.682+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:27:28.682+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8ac95b] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8ac95b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc47f90] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc47f90]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5766459e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5766459e]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e77be1] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e77be1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354f905f] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354f905f]
2025-07-24T11:27:28.705+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d766f83] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d766f83]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ea2e8a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ea2e8a]
2025-07-24T11:27:28.712+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:27:28.712+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947223724923940865, productId=1947222838805917697, templateId=1946122678071738370
2025-07-24T11:27:28.712+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947223724923940865
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 001, 商品名称: 测试商品
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:27:28.713+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=001, GOODS_NAME=测试商品, F_1=99.99, F_2=测试分类, F_3=9.99, F_4=PRODUCT_FRUIT, F_5=99.9, F_6=99.0, F_7=0.09, F_8=99.0, F_9=测试材质, F_10=http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, F_11=测试产地, F_20=<p>测试描述</p>, F_12=ge, F_13=9.0, F_14=测试状态, F_32=99, QRCODE=www.baidu.com}
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947223724923940865, actualEslId=06000000195A, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947223724923940865, 门店代码: 0002
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947223724923940865
2025-07-24T11:27:28.714+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24307b76] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24307b76]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cf9336] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cf9336]
2025-07-24T11:27:28.722+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35736be2] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35736be2]
2025-07-24T11:27:28.725+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:27:28.725+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:27:28.725+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 338 字符
2025-07-24T11:27:28.726+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 2
2025-07-24T11:27:28.726+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 2
2025-07-24T11:27:28.726+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54439dcf] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54439dcf]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12de29d4] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12de29d4]
2025-07-24T11:27:28.729+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35537f59] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35537f59]
2025-07-24T11:27:28.732+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, CATEGORY: 2.13T
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 2.13T
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 2.13t
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 2.13t
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 2.13t -> 06
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : 屏幕类型 2.13T 转换为model: 06
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 6597069773146, tmpl: 2, model: 06, taskid: 48733, token: 164849
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947223724923940865, storeCode=0002
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947223724923940865, brandCode=攀攀
2025-07-24T11:27:28.733+08:00  INFO 34968 --- [nio-8999-exec-7] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947223724923940865
2025-07-24T11:27:28.737+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":6597069773146,"tmpl":"2","model":"06","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"001","GOODS_NAME":"测试商品","F_1":99.99,"F_2":"测试分类","F_3":9.99,"F_4":"PRODUCT_FRUIT","F_5":99.9,"F_6":99.0,"F_7":0.09,"F_8":99.0,"F_9":"测试材质","F_10":"http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81","F_11":"测试产地","F_20":"<p>测试描述</p>","F_12":"ge","F_13":9.0,"F_14":"测试状态","F_32":99,"QRCODE":"www.baidu.com"},"taskid":48733,"token":164849}],"id":"1947223724923940865","timestamp":1.753327648733E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947223724923940865","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327648733}
2025-07-24T11:27:28.737+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947223724923940865, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:27:28.737+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947223724923940865, topic=esl/server/data/0002
2025-07-24T11:27:50.344+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947223724923940865, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:27:50.344+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947223724923940865, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:27:50.344+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:27:50.344+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19261ed1] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19261ed1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13de75a1] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13de75a1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f25b522] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f25b522]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7539ebc] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7539ebc]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ad39a8] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ad39a8]
2025-07-24T11:27:50.362+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c579546] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c579546]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f504325] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f504325]
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947223724923940865, productId=1947222838805917697, templateId=1946122678071738370
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947223724923940865
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 001, 商品名称: 测试商品
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:27:50.375+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=001, GOODS_NAME=测试商品, F_1=99.99, F_2=测试分类, F_3=9.99, F_4=PRODUCT_FRUIT, F_5=99.9, F_6=99.0, F_7=0.09, F_8=99.0, F_9=测试材质, F_10=http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, F_11=测试产地, F_20=<p>测试描述</p>, F_12=ge, F_13=9.0, F_14=测试状态, F_32=99, QRCODE=www.baidu.com}
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947223724923940865, actualEslId=06000000195A, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:27:50.376+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947223724923940865, 门店代码: 0002
2025-07-24T11:27:50.377+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947223724923940865
2025-07-24T11:27:50.377+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a599510] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a599510]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2d30b9] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2d30b9]
2025-07-24T11:27:50.385+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651704ce] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651704ce]
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, 模板名称: 2
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 338 字符
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 2
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 2
2025-07-24T11:27:50.388+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947223724923940865
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff6303] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947223724923940865(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947223724923940865, -1, null, NOT_DELETE, 2025-07-21 17:14:48, 1543837863788879871, null, null, 06000000195A, 0002, null, 2.13T, 1947222838805917697, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff6303]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f2fb46] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947222838805917697(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947222838805917697, -1, NOT_DELETE, 2025-07-21 17:11:17, 1543837863788879871, 2025-07-21 19:59:45, 1543837863788879871, 001, 0002, 测试商品, 测试分类, PRODUCT_FRUIT, 攀攀, 9.99, 99.99, 99.90, 99.00, 0.09, 99.00, 测试材质, http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81, 测试产地, www.baidu.com, www.baidu.com, ge, 9.00, 测试状态, 99, 1946122678071738370, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40f2fb46]
2025-07-24T11:27:50.394+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1946122678071738370
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7495f1ea] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1946122678071738370(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1946122678071738370, -1, 2, null, 2.13T, 99, NOT_DELETE, 2025-07-18 16:19:38, 1543837863788879871, 2025-07-21 22:41:46, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7495f1ea]
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1946122678071738370, CATEGORY: 2.13T
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 2.13T
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 2.13t
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 2.13t
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 2.13t -> 06
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : 屏幕类型 2.13T 转换为model: 06
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 6597069773146, tmpl: 2, model: 06, taskid: 70397, token: 505783
2025-07-24T11:27:50.397+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:27:50.398+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947223724923940865, storeCode=0002
2025-07-24T11:27:50.398+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947223724923940865, brandCode=攀攀
2025-07-24T11:27:50.398+08:00  INFO 34968 --- [nio-8999-exec-8] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947223724923940865
2025-07-24T11:27:50.401+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":6597069773146,"tmpl":"2","model":"06","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"001","GOODS_NAME":"测试商品","F_1":99.99,"F_2":"测试分类","F_3":9.99,"F_4":"PRODUCT_FRUIT","F_5":99.9,"F_6":99.0,"F_7":0.09,"F_8":99.0,"F_9":"测试材质","F_10":"http://localhost:82/dev/file/download?id=1947222476036370434&Domain=http://localhost:81","F_11":"测试产地","F_20":"<p>测试描述</p>","F_12":"ge","F_13":9.0,"F_14":"测试状态","F_32":99,"QRCODE":"www.baidu.com"},"taskid":70397,"token":505783}],"id":"1947223724923940865","timestamp":1.753327670397E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947223724923940865","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327670397}
2025-07-24T11:27:50.401+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947223724923940865, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:27:50.401+08:00  INFO 34968 --- [ntContainer#1-1] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947223724923940865, topic=esl/server/data/0002
2025-07-24T11:28:25.880+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.TemplateServiceImpl        : 开始刷新价签，价签ID: 1947313501023105026, 门店编码: 0002, 品牌编码: PANDA
2025-07-24T11:28:25.880+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 开始刷新价签: EslRefreshRequest(eslId=1947313501023105026, brandCode=PANDA, forceRefresh=false, storeCode=0002)
2025-07-24T11:28:25.880+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 请求中的品牌编码: PANDA
2025-07-24T11:28:25.880+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 获取价签完整数据: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7f619c] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7f619c]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327fdcef] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327fdcef]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77995c83] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77995c83]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7795658d] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7795658d]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6513acf9] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6513acf9]
2025-07-24T11:28:25.907+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53848e2a] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53848e2a]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3393b98c] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select 'false' as QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE from esl_brand_field_mapping WHERE ( BRAND_CODE = ? )
==> Parameters: 攀攀(String)
<==    Columns: QUERYID, ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, BRAND_CODE, TEMPLATE_FIELD, FIELD_CODE, FORMAT_RULE
<==        Row: false, 1946188424516816897, -1, null, NOT_DELETE, 2025-07-18 20:40:54, 1543837863788879871, 2025-07-19 00:22:38, 1543837863788879871, 攀攀, code, PRODUCT_ID, 商品名称
<==        Row: false, 1946188616733380609, -1, null, NOT_DELETE, 2025-07-18 20:41:39, 1543837863788879871, 2025-07-19 00:22:35, 1543837863788879871, 攀攀, name, PRODUCT_NAME, 商品名称
<==        Row: false, 1946230416441430018, -1, null, NOT_DELETE, 2025-07-18 23:27:45, 1543837863788879871, 2025-07-19 00:22:31, 1543837863788879871, 攀攀, F_01, PRODUCT_RETAIL_PRICE, 价格
<==        Row: false, 1946244176275132418, -1, null, NOT_DELETE, 2025-07-19 00:22:26, 1543837863788879871, null, null, 攀攀, F_02, PRODUCT_CATEGORY, 商品分类
<==        Row: false, 1946244319741300737, -1, null, NOT_DELETE, 2025-07-19 00:23:00, 1543837863788879871, null, null, 攀攀, F_03, PRODUCT_COST_PRICE, 商品成本价
<==        Row: false, 1946244382848798721, -1, null, NOT_DELETE, 2025-07-19 00:23:15, 1543837863788879871, null, null, 攀攀, F_04, PRODUCT_SPECIFICATION, 商品规格
<==        Row: false, 1946244450377093122, -1, null, NOT_DELETE, 2025-07-19 00:23:31, 1543837863788879871, null, null, 攀攀, F_05, PRODUCT_MEMBERSHIP_PRICE, 商品会员价
<==        Row: false, 1946244527699087362, -1, null, NOT_DELETE, 2025-07-19 00:23:50, 1543837863788879871, null, null, 攀攀, F_06, PRODUCT_DISCOUNT_PRICE, 商品折扣价
<==        Row: false, 1946244599702704129, -1, null, NOT_DELETE, 2025-07-19 00:24:07, 1543837863788879871, null, null, 攀攀, F_07, PRODUCT_DISCOUNT, 商品折扣（例如：0.8 表示8折）
<==        Row: false, 1946244674935934978, -1, null, NOT_DELETE, 2025-07-19 00:24:25, 1543837863788879871, null, null, 攀攀, F_08, PRODUCT_WHOLESALE_PRICE, 商品批发
<==        Row: false, 1946244741017194498, -1, null, NOT_DELETE, 2025-07-19 00:24:40, 1543837863788879871, null, null, 攀攀, F_09, PRODUCT_MATERIAL, 商品材质
<==        Row: false, 1946244808008617986, -1, null, NOT_DELETE, 2025-07-19 00:24:56, 1543837863788879871, null, null, 攀攀, F_10, PRODUCT_IMAGE, 商品图片（路径或URL）
<==        Row: false, 1946244885259309057, -1, null, NOT_DELETE, 2025-07-19 00:25:15, 1543837863788879871, null, null, 攀攀, F_11, PRODUCT_ORIGIN, 商品产地
<==        Row: false, 1946244968667238402, -1, null, NOT_DELETE, 2025-07-19 00:25:35, 1543837863788879871, null, null, 攀攀, F_20, PRODUCT_DESCRIPTION, 商品描述
<==        Row: false, 1946245050686853122, -1, null, NOT_DELETE, 2025-07-19 00:25:54, 1543837863788879871, null, null, 攀攀, F_12, PRODUCT_UNIT, 商品单位（如：个、件、瓶等）
<==        Row: false, 1946245165296209922, -1, null, NOT_DELETE, 2025-07-19 00:26:22, 1543837863788879871, null, null, 攀攀, F_13, PRODUCT_WEIGHT, 产品重量（单位：kg）
<==        Row: false, 1946245224305872898, -1, null, NOT_DELETE, 2025-07-19 00:26:36, 1543837863788879871, null, null, 攀攀, F_14, PRODUCT_STATUS, 商品状态（如：上架、下架、预售等）
<==        Row: false, 1946245284653518849, -1, null, NOT_DELETE, 2025-07-19 00:26:50, 1543837863788879871, null, null, 攀攀, F_32, PRODUCT_STOCK, 商品库存
<==        Row: false, 1947173347558027266, -1, null, NOT_DELETE, 2025-07-21 13:54:37, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_QRCODE, 二维码
<==        Row: false, 1947173427983806466, -1, null, NOT_DELETE, 2025-07-21 13:54:57, 1543837863788879871, null, null, 攀攀, QRCODE, PRODUCT_BARCODE, 条形码
<==      Total: 20
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3393b98c]
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 字段映射配置查询结果: brandCode=攀攀, mappingCount=20
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 成功获取价签完整数据: eslId=1947313501023105026, productId=1947312777082040322, templateId=1947312285182455810
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 获取到价签数据，商品品牌: 攀攀
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 请求参数中的品牌编码: PANDA (用于选择解析器)
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 商品数据中的品牌字段: 攀攀
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 实际使用的品牌编码: 攀攀 (用于查找品牌适配器)
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 获取到品牌适配器: PandaBrandAdapter
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 品牌适配器支持的品牌编码: 攀攀
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 数据验证通过
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 开始转换攀攀品牌数据: eslId=1947313501023105026
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 开始构建数据映射，商品ID: 002, 商品名称: 002
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 使用字段映射配置，映射数量: 20
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ID -> code (格式: 商品名称)
2025-07-24T11:28:25.917+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_NAME -> name (格式: 商品名称)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_RETAIL_PRICE -> F_01 (格式: 价格)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_CATEGORY -> F_02 (格式: 商品分类)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_COST_PRICE -> F_03 (格式: 商品成本价)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_SPECIFICATION -> F_04 (格式: 商品规格)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MEMBERSHIP_PRICE -> F_05 (格式: 商品会员价)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT_PRICE -> F_06 (格式: 商品折扣价)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DISCOUNT -> F_07 (格式: 商品折扣（例如：0.8 表示8折）)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WHOLESALE_PRICE -> F_08 (格式: 商品批发)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_MATERIAL -> F_09 (格式: 商品材质)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_IMAGE -> F_10 (格式: 商品图片（路径或URL）)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_ORIGIN -> F_11 (格式: 商品产地)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_DESCRIPTION -> F_20 (格式: 商品描述)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_UNIT -> F_12 (格式: 商品单位（如：个、件、瓶等）)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_WEIGHT -> F_13 (格式: 产品重量（单位：kg）)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STATUS -> F_14 (格式: 商品状态（如：上架、下架、预售等）)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_STOCK -> F_32 (格式: 商品库存)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_QRCODE -> QRCODE (格式: 二维码)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射配置: PRODUCT_BARCODE -> QRCODE (格式: 条形码)
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 字段映射完成，实际映射字段数量: 19
2025-07-24T11:28:25.918+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 映射结果: {GOODS_CODE=002, GOODS_NAME=002, F_1=2.0, F_2=002, F_3=2.0, F_4=PRODUCT_FRUIT, F_5=2.0, F_6=2.0, F_7=2.0, F_8=2.0, F_9=002, F_10=http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, F_11=002, F_20=<p>002</p>, F_12=ge, F_13=2.0, F_14=002, F_32=2, QRCODE=002}
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.adapter.PandaBrandAdapter          : 攀攀品牌数据转换完成: eslId=1947313501023105026, actualEslId=1C000000100B, checksum=12780dc2f9234a1406c5853435f7296a
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 数据转换完成，输出数据类型: BrandOutputData
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 准备发送消息到RabbitMQ队列，使用品牌编码: 攀攀
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始构建MQTT载荷，ESL ID: 1947313501023105026, 门店代码: 0002
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始构建data数组，ESL ID: 1947313501023105026
2025-07-24T11:28:25.919+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始获取模板名称，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6860970e] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6860970e]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79db32d2] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79db32d2]
2025-07-24T11:28:25.927+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7f99f0] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7f99f0]
2025-07-24T11:28:25.930+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, 模板名称: 3
2025-07-24T11:28:25.930+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始从CONTENT字段解析模板名称
2025-07-24T11:28:25.930+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : CONTENT字段内容长度: 337 字符
2025-07-24T11:28:25.931+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从panels[0].name提取到模板名称: 3
2025-07-24T11:28:25.931+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从CONTENT字段解析到模板名称: 3
2025-07-24T11:28:25.931+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始获取model值，ESL ID: 1947313501023105026
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d498107] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE , EXT_JSON from panda_esl where ID = ?
==> Parameters: 1947313501023105026(String)
<==    Columns: ID, TENANT_ID, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, ESL_ID, STORE_CODE, AP_SN, ESL_MODEL, BOUND_PRODUCT, BATTERY_LEVEL, TEMPERATURE, SIGNAL_STRENGTH, COMMUNICATION_COUNT, FAILURE_COUNT, ESL_CATEGORY, ESL_STATUS, SCREEN_COLOR, COMMUNICATION_METHOD, VERSION, HARDWARE, EXT_JSON
<==        Row: 1947313501023105026, -1, null, NOT_DELETE, 2025-07-21 23:11:33, 1543837863788879871, null, null, 1C000000100B, 0002, null, 4.20T, 1947312777082040322, null, null, null, null, null, null, null, null, null, null, null, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d498107]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bc0df2] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE , EXT_JSON, PRODUCT_DESCRIPTION from panda_product where ID = ?
==> Parameters: 1947312777082040322(String)
<==    Columns: ID, TENANT_ID, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, PRODUCT_ID, STORE_CODE, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_SPECIFICATION, PRODUCT_BRAND, PRODUCT_COST_PRICE, PRODUCT_RETAIL_PRICE, PRODUCT_MEMBERSHIP_PRICE, PRODUCT_DISCOUNT_PRICE, PRODUCT_DISCOUNT, PRODUCT_WHOLESALE_PRICE, PRODUCT_MATERIAL, PRODUCT_IMAGE, PRODUCT_ORIGIN, PRODUCT_QRCODE, PRODUCT_BARCODE, PRODUCT_UNIT, PRODUCT_WEIGHT, PRODUCT_STATUS, PRODUCT_STOCK, ESL_TEMPLATE_CODE, EXT_JSON, PRODUCT_DESCRIPTION
<==        Row: 1947312777082040322, -1, NOT_DELETE, 2025-07-21 23:08:40, 1543837863788879871, null, null, 002, 0002, 002, 002, PRODUCT_FRUIT, 攀攀, 2.00, 2.00, 2.00, 2.00, 2.00, 2.00, 002, http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81, 002, 002, 002, ge, 2.00, 002, 2, 1947312285182455810, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bc0df2]
2025-07-24T11:28:25.937+08:00  INFO 34968 --- [io-8999-exec-10] c.p.downloadcf.service.DataService       : 查询模板，模板ID: 1947312285182455810
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f78cd34] was not registered for synchronization because synchronization is not active
JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54696d50] will not be managed by Spring
==>  Preparing: select ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER , CONTENT, EXT_JSON from print_template_design where ID = ?
==> Parameters: 1947312285182455810(String)
<==    Columns: ID, TENANT_ID, NAME, CODE, CATEGORY, SORT_CODE, DELETE_FLAG, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, CONTENT, EXT_JSON
<==        Row: 1947312285182455810, -1, 3, PTD-1753110402676-995, 4.20T, 99, NOT_DELETE, 2025-07-21 23:06:43, 1543837863788879871, 2025-07-21 23:07:24, 1543837863788879871, <<BLOB>>, <<BLOB>>
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f78cd34]
2025-07-24T11:28:25.939+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 找到模板数据，模板ID: 1947312285182455810, CATEGORY: 4.20T
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 从模板中解析到屏幕类型: 4.20T
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 开始转换屏幕类型到model，输入屏幕类型: 4.20t
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 标准化后的屏幕类型: 4.20t
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 屏幕类型转换完成: 4.20t -> 1C
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : 屏幕类型 4.20T 转换为model: 1C
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : data数组构建完成，tag: 30786325581835, tmpl: 3, model: 1C, taskid: 5940, token: 48262
2025-07-24T11:28:25.940+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.MessageProducerService     : MQTT载荷构建完成，载荷大小: 5 字段
2025-07-24T11:28:25.941+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到RabbitMQ队列: eslId=1947313501023105026, storeCode=0002
2025-07-24T11:28:25.941+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.EslRefreshService          : 价签刷新消息已发送到队列: eslId=1947313501023105026, brandCode=攀攀
2025-07-24T11:28:25.941+08:00  INFO 34968 --- [io-8999-exec-10] c.p.d.service.TemplateServiceImpl        : 价签刷新请求已处理，价签ID: 1947313501023105026
2025-07-24T11:28:25.944+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 从RabbitMQ接收到刷新消息: {"mqttPayload":{"command":"wtag","data":[{"tag":30786325581835,"tmpl":"3","model":"1C","checksum":"12780dc2f9234a1406c5853435f7296a","forcefrash":1,"value":{"GOODS_CODE":"002","GOODS_NAME":"002","F_1":2.0,"F_2":"002","F_3":2.0,"F_4":"PRODUCT_FRUIT","F_5":2.0,"F_6":2.0,"F_7":2.0,"F_8":2.0,"F_9":"002","F_10":"http://localhost:82/dev/file/download?id=1947312644269404161&Domain=http://localhost:81","F_11":"002","F_20":"<p>002</p>","F_12":"ge","F_13":2.0,"F_14":"002","F_32":2,"QRCODE":"002"},"taskid":5940,"token":48262}],"id":"1947313501023105026","timestamp":1.75332770594E9,"shop":"0002"},"messageType":"refresh","mqttTopic":"esl/server/data/0002","eslId":"1947313501023105026","priority":1,"brandCode":"攀攀","storeCode":"0002","timestamp":1753327705940}
2025-07-24T11:28:25.945+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 处理新格式刷新消息: eslId=1947313501023105026, brandCode=攀攀, storeCode=0002, topic=esl/server/data/0002, priority=1
2025-07-24T11:28:25.945+08:00  INFO 34968 --- [ntContainer#1-2] c.p.downloadcf.service.RabbitMQListener  : 新格式刷新消息MQTT发送成功: eslId=1947313501023105026, topic=esl/server/data/0002
